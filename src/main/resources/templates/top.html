<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>创新创业平台</title>
    <link href="/bootstrap/css/bootstrap.min.css" th:href="@{/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
    <script th:src="@{/js/jquery.min.js}" src="/js/jquery.min.js"></script>
    <script th:src="@{/js/bootstrap.min.js}" src="/js/bootstrap.min.js"></script>
</head>
<body style="padding-left: 130px;padding-right: 130px">
<h2>创新创业平台</h2>
<div class="nav navbar-inverse" style="border-radius: 5px">
    <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
            <li>
                <a href="#">创新创业资讯</a>
            </li>
            <li>
                <a href="/match/list">比赛项目</a>
            </li>
            <li>
                <a href="/browse/recommend">业余作品</a>
            </li>
            <li class="dropdown">


            </li>
        </ul>
        <ul class="nav navbar-nav navbar-right" id="userul">
            <li><a>你好，小可爱</a></li><li class="divider-vertical"></li>
            <li class="divider-vertical"></li>
            <li class="dropdown">
                <a class=" dropdown-toggle btn_button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <span class="typeselect">个人中心</span>
                    <span class="caret"></span>
                </a>
            </li>
        </ul>
    </div>

</div>
<script type="text/javascript">
    $(function() {
       find2();
    });
    function find2() {
        $.ajax({
            type:"get",
            url:"/user/person",
            async: false,
            contentType:"application/json;charset=utf-8",
            data:{},
            success:function(datas){
                $("#userul").html("");
                if(datas == "anonymousUser"){
                    var li1 = $("<li><a href='/login'>登录</a></li>");
                    var li2 = $("<li><a href='/register'>注册</a></li>");
                }else{
                    var li1 = $("<li><a>你好，"+datas.username+"</a></li><li class=\"divider-vertical\"></li>");
                    var li2 = $("<li class=\"dropdown\">" +
                        "<a class=\" dropdown-toggle btn_button\" id=\"dropdownMenu1\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">" +
                        "<span class=\"typeselect\">个人中心</span>" +
                        "<span class=\"caret\"></span></a></li>"
                        );
                    var li6 = $("<ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenu1\"></ul>");
                    if (datas.style == '1') {//如果是学生，就有作品中心和比赛中心
                        var li3 = $( "<li><a href='#'>作品中心</a></li>");
                        var li4 = $("<li><a href='/group/list'>比赛中心</a></li>");

                    }else if(datas.style == '2'){//如果是老师，就有资讯中心和比赛中心
                        var li3 = $("<li><a href='#'>资讯中心</a></li>");
                        var li4 = $("<li><a href='/match/teacherList'>比赛中心</a></li>" +
                            "<li><a href='/event/teacherEvent'>评审中心</a></li>");

                    }else if(datas.style == '3'){//如果是企业家，就都没有
                        var li3 = $("");
                        var li4 = $("");
                    }
                    var li5 = $("<li><a href='#'>消息</a></li>" +
                                "<li><a href='#'>设置</a></li>" +
                                "<li><a href='/logout' methods='post'>退出</a></li>");
                    $(li6).append.call($(li6),li3,li4,li5);
                    $(li2).append.call($(li2),li6);
                }
                $("#userul").append.call($("#userul"),li1,li2);
            },
            error : function(result) {
                $("#userul").html("");
                var li1 = $("<li><a href='/login'>登录</a></li>");
                var li2 = $("<li><a href='/register'>注册</a></li>");
            }
        });

    }
</script>
</body>
</html>